{"video": {"id": "ipYlztBRpp0", "title": "Full Stack Web App using Vue.js & Express.js: Part 6 - Search", "description": "Welcome to part 6 of a new series where I will create a full stack web application using Vue.js and Express.js\n\nGitHub repo: https://github.com/codyseibert/tab-tracker\n\nFollow Cody on Twitter: https://twitter.com/CodyLSeibert\n\nLearn to code for free and get a developer job: https://www.freecodecamp.com\n\nRead hundreds of articles on programming: https://medium.freecodecamp.com", "duration": "PT1H15M2S", "likes": "261", "views": "29023"}, "comments": [{"topLevelComment": {"author": "\u0414\u043c\u0438\u0442\u0440\u0438\u0439 \u0411\u043e\u0440\u0449\u0435\u0432\u0441\u043a\u0438\u0439", "text": "Can someone please explain me how does it's search query work on 17:00? I can't understand what is going on in where statement", "likes": 0}}, {"topLevelComment": {"author": "Amit Ranganathan", "text": "How would i go about deleting an actual song from the database? I tried following the same logic as deleting a bookmark, but am having problems.  Would love some help asap! :)", "likes": 0}}, {"topLevelComment": {"author": "Darius Goore", "text": "for some reason, when bookmarks are saved, the UserId is saved as null.  SongId is accurate.  Anyone have a fix?", "likes": 0}, "replies": [{"author": "Clirim Ajeti", "text": "I changed \n\"const {songId, userId} = req.body; \" to \n \"const songId = req.body.params.songId\r\n const userId = req.body.params.userId\"", "likes": 0}]}, {"topLevelComment": {"author": "Paul Borek", "text": "At around 46:25: if bookmark is null you should reply with a 204 (no data). Not sure if it is specified what body to send in this case", "likes": 0}}, {"topLevelComment": {"author": "DaR", "text": "17:50 For sequelize 4.41.0, the $or and $like have been changed to [Op.or] and [Op.like] respectively. Add const { Op } = require('sequelize'); at your 1st line before changing them.", "likes": 27}, "replies": [{"author": "Noisy Trace", "text": "Thanks! that saved me a lot of hardship", "likes": 0}, {"author": "Nico54w", "text": "<3", "likes": 0}]}, {"topLevelComment": {"author": "zuber Ab", "text": "26:19 <div class=\"red--text\" v-html=\"error\" />", "likes": 0}}, {"topLevelComment": {"author": "QA Hoang", "text": "Newest version of sequelize (4.39.0) has a bug where $or operator does not work which generates an \"Invalid value {title: '$like': ...} error. Reverting to version 4.8.0 like Cody's works.", "likes": 3}, "replies": [{"author": "Mark Edward", "text": "it has been too long to answer this but to fix this. You need to add const { Op } = require(\"sequelize\"); on top of the page and change the $or and $like to [Op.or] and [Op.and]", "likes": 0}]}, {"topLevelComment": {"author": "Alex Leibowitz", "text": "Another option for persisted states: https://jsfiddle.net/clemarc/uecadt8m/1/", "likes": 1}, "replies": [{"author": "RTW590", "text": "Thanks for this, I might give it a shot. Do you know when in the video he does persist the state to localstorage? I have been going through the videos and I have not found it yet.", "likes": 0}]}, {"topLevelComment": {"author": "Alex Leibowitz", "text": "So is the bookmark relation being set as 1:1 or mahy to many?  Because the bookmark table ends up looking like a many to many association, but the methods you use to define it are for 1-1 according to the Sequelize docs...", "likes": 0}}, {"topLevelComment": {"author": "Alex Leibowitz", "text": "OK -- so after some puzzling I think I understand what's going on with the sequelize query.  It's shorthand for this, right?\n\nSong.findAll({\nwhere: {\n$or: [\n{title: {$like: `%${search}%`}},\n{artist: {$like: `%${search}%`}},\n...etc.]\n}})\n\nRight?", "likes": 0}}, {"topLevelComment": {"author": "Razva Cos", "text": "SAILS. JS + VUE. JS and jwt auth please", "likes": 0}}, {"topLevelComment": {"author": "george Iosifelis", "text": "Very good tutorial, well done.   FYI, I am using vue-router 3.0.1 and at 9:55 (where you create the search query), const route={name:'songs'} does not work.  Use {path:'song'}", "likes": 3}, "replies": [{"author": "Lugwes", "text": "nice, thank you. {path:'songs'} is the correct one", "likes": 0}, {"author": "Anne Z", "text": "You are right! Thanks for the solution!", "likes": 0}]}, {"topLevelComment": {"author": "Harjit Singh", "text": "Hello Sir, Thank you for this series. I am learning an lot from this and also figuring out what else to learn more. I have found out that for showing/hiding an element v-show can also be used. Here is an example which I have used instead of v-if for bookmark buttons in SongsMetadata.vue. My understanding is that it is a matter of choice but it's good to know alternate ways as well.\n\n                   <v-btn\n                        v-show=\"$store.state.isUserLoggedIn\"\n                        dark \n                        class=\"cyan\"  \n                        @click=\"unbookmark\">\n                        Bookmark\n                    </v-btn>", "likes": 1}}, {"topLevelComment": {"author": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u0412\u043e\u0440\u043e\u0431\u044c\u0451\u0432", "text": "Amazing tus. \nThank you! \n\nESLINT Extension  for vscode can help with autofixing small problems like extra semicolon or whitespaces or whatever. You even can set it up to autofix on file save. \nAlso why don't you use Ctrl/Cmd + P in order to search for files\nHopefully will be useful for somebody else", "likes": 0}}, {"topLevelComment": {"author": "Krisan Paulino", "text": "Hey, Im not a native English speaker. I still don't get it why we have to make seeds. Pls someone explain it to me by replying to this comment.", "likes": 0}, "replies": [{"author": "Juan Sm", "text": "Along the course he'd reset the data on the database by changing by setting \"force: true\" in app.js in the server.\nBut then he'd have to fill all the data from scratch. \nThe idea is to use this seed folder to re-populate it automatically.", "likes": 1}]}, {"topLevelComment": {"author": "Cody Legume", "text": "I love your videos. But the noise you make with your tongue is the most annoying thing.", "likes": 2}, "replies": [{"author": "Jeffrey van Rossum", "text": "Those are mouse click sound effects.", "likes": 0}]}, {"topLevelComment": {"author": "Dani M Vijay", "text": "search not working and always returns an error instead. Here is the search, else part works perfectly.\n\nif (search) {\n  songs = await Song.findAll({\n    where: {\n      $or: [\n        'title', 'artist', 'genre', 'album'\n      ].map(key => ({\n        [key]: {\n          $like: `%${search}%`\n        }\n      }))\n    }\n  })\n} else {\n  songs = await Song.findAll({\n    limit: 10\n  })\n}\nres.send(songs)\n\nhttps://github.com/danivijay/tab-tracker/issues/4\n\nfull code can be found on the repo.\n\nPlease help.", "likes": 0}, "replies": [{"author": "wasddd_", "text": "MAN!!! You are the real MVP right here!", "likes": 0}, {"author": "Dani M Vijay", "text": "As Cody explained here: https://github.com/danivijay/tab-tracker/issues/4 , it was caused by newer version of sequelize- \n\n// include these at the top now\nconst Sequelize = require('sequelize');\nconst Op = Sequelize.Op;\n\n        songs = await Song.findAll({\n          where: {\n            [Op.or]: [\n              'title', 'artist', 'genre', 'album'\n            ].map(key => ({\n              [key]: {\n                [Op.like]: `%${search}%`\n              }\n            }))\n          }\n        })\n\nwill work for newer versions of sequelize.", "likes": 7}]}, {"topLevelComment": {"author": "msimundz", "text": "Anyone else getting an \"SequelizeForeignKeyConstraintError SQLITE_CONSTRAINT: FOREIGN KEY constraint failed\" when trying to seed the db? I've copy pasted most of the code from the codys github and still recieveing this error... any help? I've also reinstalled sequelize to the same version....", "likes": 2}, "replies": [{"author": "Peter Ulev", "text": "I get the same problem, this is really strange... thanks for the solution btw", "likes": 0}, {"author": "msimundz", "text": "for some weird reason await Promise.all in seed/index.js is not working as expected... first its trying to seed songs then create bookmarks and create users. It seems to work properly only after I introduce a hackity hack with delay  https://jsfiddle.net/tvstdewg/\nNot sure why...", "likes": 2}]}, {"topLevelComment": {"author": "Arthur Garreau", "text": "Hi Cody, \nI get a 500 when I set up the key as 'search' at 12:54 in the SongsService.js but it works if I change it by anything else(200). After, I just follow your tut to add the functionalities in the SongsController.js but it does not work.\nAny suggestion?\n\nThanks in advance for your answer!", "likes": 1}, "replies": [{"author": "Kevin Tanyag", "text": "EDIT: D'oh! Looks like Cody already addressed it here: https://github.com/danivijay/tab-tracker/issues/4#issuecomment-357985735\n\nLooks like Sequelize made some syntax changes for security.\nSequelize's docs: http://docs.sequelizejs.com/manual/tutorial/querying.html#where\nHelpful issue: https://github.com/sequelize/sequelize/issues/8448\n\nWhat worked for me on sequelize version 4.37.5:\n\n1. add require to top of SongsController:\nconst Sequelize = require('sequelize')\n\n2. refactor if block to:\n\nif (search) {\n       songs = await Song.findAll({\n         where: {\n           [Sequelize.Op.or]: [\n            {title: {[Sequelize.Op.like]: '%' + search + '%'}},\n            {album: {[Sequelize.Op.like]: '%' + search + '%'}}\n            // etc.\n           ]\n         }\n      })\n}", "likes": 3}, {"author": "KtoBy\u0142Pierwszy ?", "text": "Same here ... also when i change the key i got 200 but then in debug-> Network/preview i see all objects  not a specific one :/", "likes": 0}, {"author": "Arthur Garreau", "text": "Nope. Couldn't find the bug after few hours trying... Let me know if you solve it!", "likes": 0}, {"author": "Jessica Pittman", "text": "I'm running into this same issue. Did you figure it out?", "likes": 0}, {"author": "Arthur Garreau", "text": "I tried to copy paste your code but it doesn\u2019t work... and tried your app and works perfectly... that\u2019s just insanely weird!", "likes": 2}]}, {"topLevelComment": {"author": "Mohamed Adel", "text": "hey i use mongodb in this course, so can any one here help me and tell me how to make make back end for the search bar in minute 15:00  so in songsController.js what should i type in {{ if -statement}}  to make search bar search in [title , genre, album and artist] ??? please help me ^ ^", "likes": 0}, "replies": [{"author": "Mohamed Adel", "text": "async index (req, res) {\n   try {\n     let songs = null\n     const search = req.query.search\n     if (search) {\n       const songs = await Songs.find({'$or':[\n         {title:new RegExp(search,'i')},\n         {artist:new RegExp(search,'i')},\n         {album:new RegExp(search,'i')},\n         {lyrics:new RegExp(search,'i')}\n       ]})\n       res.send(songs)\n     } else {\n       const songs = await Songs.find({}).limit(10)\n       res.send(songs)\n     }", "likes": 2}]}, {"topLevelComment": {"author": "\ub9c8\uc2a4\ud0c0\ube0c\ub8e8", "text": "It greatly help me jump into vue and express. I strongly recommend this video", "likes": 0}}, {"topLevelComment": {"author": "rojimark", "text": "Hey Cody.Thanks. Quick question though. At 13:46, you were gonna say that if you change the search value to an empty string...., it would give an error? I am getting an error on empty string. I get a status code 304 Not Modified when hitting http://localhost:8081/songs. Any suggestions how to go about it?", "likes": 0}, "replies": [{"author": "rojimark", "text": "Nevermind. I got it figured out. Thanks again! :)", "likes": 0}]}, {"topLevelComment": {"author": "MTandi", "text": "I've got a problem with debounce - when I try to change the route within these 700 miliseconds, I'm navigated back to the page with debounce.\n\nHad to change following line in the debounce function:\nthis.$router.push(route)\nto:\nif (this.$route.name === 'songs') this.$router.push(route)", "likes": 0}, "replies": [{"author": "Rhysepior", "text": "https://stackoverflow.com/questions/37694243/using-lodash-in-all-of-vue-component-template", "likes": 0}]}, {"topLevelComment": {"author": "Kettle-Potato", "text": "for people who want to start at Part 6, is there a starter files branch available on GitHub?", "likes": 0}, "replies": [{"author": "Alex Leibowitz", "text": "Why would you want to start at part 6?!", "likes": 0}]}, {"topLevelComment": {"author": "Chike Ozulumba", "text": "Hi Cody\nAwesome work put together. \nWas going through this section of the tutorial and i discovered that the backend doesn't spill back response data in terms of the book marking function, \ni'm always getting \"this.bookmark.id is undefined\"\nDo u have any ideas\nThanks again", "likes": 0}, "replies": [{"author": "Jindrich Jehlicka", "text": "getting the same error", "likes": 0}]}, {"topLevelComment": {"author": "Priyanka Madiraju", "text": "@Cody Seibert\nI get the error below after I have moved the Panel to globals folder and I have made sure that all paths are correct. Could you please help me with this. I have tried googling this but did not get much help. \n\nwebpack-internal:///100:84 Uncaught ReferenceError: Panel is not defined\n    at eval (webpack-internal:///100:84)\n    at Object.<anonymous> (app.js:1356)\n    at __webpack_require__ (app.js:660)\n    at fn (app.js:86)\n    at eval (webpack-internal:///170:1)\n    at Object.<anonymous> (app.js:1805)\n    at __webpack_require__ (app.js:660)\n    at fn (app.js:86)\n    at eval (webpack-internal:///111:5)\n    at Object.<anonymous> (app.js:1433)", "likes": 0}}, {"topLevelComment": {"author": "mohanad hafiz", "text": "If any one could help please webpack watch suddenly stopped working", "likes": 0}}, {"topLevelComment": {"author": "Gil", "text": "For npm seed you can add a check if NODE_ENV = development. We never know :D", "likes": 1}}, {"topLevelComment": {"author": "iCityWork", "text": "Hi, thank you so much for the AWESOME tutorials!! I have a question though, at times, seems almost random, I am getting undefined for the songId in the bookmark section. I don't know how, since it is displaying the correct song but yet this.song.id is showing as undefined in this section of code:\n\nconst bookmark = (await BookmarksServices.index({\n      songId: this.song.id,\n      userId: this.$store.state.user.id\n    })).data\n\nDriving me nuts trying to figure out why. Thanks for any pointer you can give me.", "likes": 2}, "replies": [{"author": "Carl Swanson", "text": "@iCityWork Thank you! This was driving me crazy too!", "likes": 0}, {"author": "iCityWork", "text": "I ended up fixing it by changing the songId to this\n\n songId: this.$store.state.route.params.songId\n\n\nI was never able to get watch to fire.", "likes": 5}]}, {"topLevelComment": {"author": "Modus Pwnens", "text": "Is there an edit around 1:06:00 ? You changed some stuff in routes.js and how the bookmark is passed in BookmarksService.js. Took me forever to figure out.\n\nSpecifically in routes.js you changed from app.get('/bookmarks/:bookmarkId') to app.delete('/bookmarks/:bookmarkId')\n\nand in BookmarksService.js you changed from \n\n    return Api().post('bookmarks', {\n      params: bookmark\n    })\nto\nreturn Api().post('bookmarks', bookmark)", "likes": 12}, "replies": [{"author": "Dan C", "text": "@David Campos Thanks, sir!", "likes": 0}, {"author": "David Campos", "text": "Thanks for noting this, @Ian Hunter. Also, in BookmarksController.js, he changed (prior to 1:06:00):\n\n  async post (req, res) {\n    try {\n      const bookmark = req.query\n      const newBookmark = await Bookmark.create(bookmark)\n      res.send(newBookmark)\n    } catch (err) {\n      res.status(500).send({\n        error: 'An error occurred trying to create the bookmark.'\n      })\n    }\n  },", "likes": 3}]}, {"topLevelComment": {"author": "FunfailDigital", "text": "Do you have any blog posts? I will follow you next.", "likes": 0}, "replies": [{"author": "FunfailDigital", "text": "Cody Seibert Thank you, you make me grow so far.", "likes": 0}]}, {"topLevelComment": {"author": "Robert O'Connor", "text": "FYI you can return 201 when you create records, 201 is Created", "likes": 2}}]}